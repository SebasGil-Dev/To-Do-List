---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Inicio">
  <main class="min-h-screen bg-gray-50 flex flex-col items-center justify-center px-4">
    <section class="bg-white rounded-3xl shadow-lg max-w-xl w-full p-8">
      <h1 class="text-2xl font-bold text-gray-800 mb-2">
        隆Hola, <span id="nombre-usuario">usuario</span>! 
      </h1>
      <p class="text-gray-600 mb-6">
        Sesi贸n iniciada correctamente. Esta ser谩 tu p谩gina de inicio / panel principal.
      </p>

      <div class="flex flex-col gap-3">
        <button
          id="ir-a-tareas"
          class="w-full bg-red-400 hover:bg-red-500 text-white font-semibold py-2 rounded-lg shadow active:scale-95 transition"
        >
          Ir a mis tareas (pr贸ximamente)
        </button>

        <button
          id="logout-btn"
          class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 rounded-lg active:scale-95 transition"
        >
          Cerrar sesi贸n
        </button>
      </div>
    </section>
  </main>
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    //  Comprobar si hay token; si no, mandar al login
    const token = localStorage.getItem("token");
    if (!token) {
      window.location.href = "/";
      return;
    }

    // Mostrar el correo (o nombre) del usuario si lo guardaste
    const userEmail = localStorage.getItem("userEmail") || "";
    const nombreSpan = document.getElementById("nombre-usuario");
    if (nombreSpan) {
      nombreSpan.textContent = userEmail || "usuario";
    }

    // Bot贸n de logout
    const logoutBtn = document.getElementById("logout-btn");
    if (logoutBtn) {
      logoutBtn.addEventListener("click", () => {
        localStorage.removeItem("token");
        localStorage.removeItem("userEmail");
        window.location.href = "/";
      });
    }

    // Bot贸n para ir a /tareas (cuando la tengamos hecha)
    const tareasBtn = document.getElementById("ir-a-tareas");
    if (tareasBtn) {
      tareasBtn.addEventListener("click", () => {
        // M谩s adelante creamos esta ruta
        // window.location.href = "/tareas";
        alert("Aqu铆 luego te llevaremos a la vista de tareas ");
      });
    }
  });
</script>
